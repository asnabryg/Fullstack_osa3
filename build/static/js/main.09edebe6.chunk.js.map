{"version":3,"sources":["components/PersonForm.js","components/Persons.js","components/Filter.js","services/personService.js","App.js","index.js"],"names":["PersonForm","props","onSubmit","addNewPerson","value","newName","onChange","handleNameChange","newNumber","handleNumberChange","type","Person","person","handleDelete","name","number","onClick","id","Persons","persons","map","Filter","newFilter","handleFilterChange","baseUrl","x","getAll","axios","get","then","response","data","create","newPerson","post","update","put","deletePerson","delete","Notification","notification","className","style","color","App","useState","setPersons","setNotification","useEffect","console","log","personService","setFilteredPersons","setNewName","setNewNumber","filteredPersons","setNewFilter","event","target","filter","p","toLowerCase","includes","preventDefault","allPersons","some","window","confirm","find","updatedPerson","returnedPerson","updatedPersons","catch","error","returnedData","newPersons","concat","setTimeout","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.09edebe6.chunk.js","sourcesContent":["import React from \"react\"\n\n\nconst PersonForm = (props) => {\n    return (\n        <form onSubmit={props.addNewPerson}>\n            <div>\n                name: <input value={props.newName} onChange={props.handleNameChange} />\n            </div>\n            <div>\n                number: <input value={props.newNumber} onChange={props.handleNumberChange} />\n            </div>\n            <div>\n                <button type=\"submit\">add</button>\n            </div>\n        </form>\n    )\n}\n\nexport default PersonForm","import React from \"react\"\n\nconst Persons = ({persons, handleDelete}) => {\n    return (\n        <div>\n            {persons.map(person =>\n                <Person\n                    key={person.name}\n                    person={person}\n                    handleDelete={handleDelete}/>)}\n        </div>\n    )\n}\n\nconst Person = ({person, handleDelete}) => {\n    return (\n        <p>\n            {person.name} {person.number}\n            <button onClick={() => handleDelete(person.id)}>delete</button>\n        </p>\n    )\n}\n\nexport default Persons","import React from \"react\"\n\nconst Filter = (props) => {\n    return (\n        <form>\n            <input value={props.newFilter} onChange={props.handleFilterChange} />\n        </form>\n    )\n}\n\nexport default Filter","import axios from \"axios\"\n\nconst baseUrl = \"/api/persons\"\n\nconst getAll = () => {\n    const request = axios.get(baseUrl)\n    return request.then(response => response.data)\n}\n\nconst create = newPerson => {\n    const request = axios.post(baseUrl, newPerson)\n    return request.then(response => response.data)\n}\n\nconst update = (id, newPerson) => {\n    const request = axios.put(`${baseUrl}/${id}`, newPerson)\n    return request.then(response => response.data)\n}\n\nconst deletePerson = id => {\n    const request = axios.delete(`${baseUrl}/${id}`)\n    return request\n}\n\nconst x = {getAll, create, update, deletePerson}\nexport default x","import React, { useEffect, useState } from 'react'\nimport \"./index.css\"\nimport PersonForm from \"./components/PersonForm\"\nimport Persons from \"./components/Persons\"\nimport Filter from \"./components/Filter\"\nimport personService from \"./services/personService\"\n\nconst App = () => {\n\n  const [persons, setPersons] = useState([])\n  const [notification, setNotification] = useState([null, null]) //[notifiationStyle, message]\n\n  useEffect(() => {\n    console.log('effect')\n    personService.getAll()\n      .then(data => {\n        console.log('promise fulfilled')\n        setPersons(data)\n        setFilteredPersons(data)\n      })\n  }, [])\n\n  const addNewPerson = (event) => {\n    event.preventDefault()\n    personService.getAll()\n    .then(allPersons => {\n      if (!allPersons.some(p => p.name === newName)) {\n        const person = {\n          name: newName,\n          number: newNumber\n        }\n        personService.create(person)\n          .then(returnedData => {\n            const newPersons = allPersons.concat(returnedData)\n            setPersons(newPersons)\n            setNewName(\"\")\n            setNewNumber(\"\")\n            setFilteredPersons(newPersons.filter(p =>\n              p.name.toLowerCase().includes(newFilter.toLowerCase())))\n            setNotification([\"green\", `Added ${returnedData.name}`])\n            setTimeout(() => {\n              setNotification([null, null])\n            }, 5000)\n          })\n          .catch(error => {\n            console.log(`Fail to add person: ${person.name}`)\n            console.log(error)\n          })\n      }else{\n        if (window.confirm(`${newName} is already added to phonebook, replace the old number with new one?`)) {\n          const person = allPersons.find(p => p.name === newName)\n          const updatedPerson = {...person, number: newNumber}\n          personService.update(person.id, updatedPerson)\n            .then(returnedPerson => {\n              const updatedPersons = allPersons.map(p => p.id === person.id ? returnedPerson : p)\n              setPersons(updatedPersons)\n              setFilteredPersons(updatedPersons.filter(p =>\n                p.name.toLowerCase().includes(newFilter.toLowerCase())))\n              setNewName(\"\")\n              setNewNumber(\"\")\n            })\n            .catch(error => {\n              console.log('Error changing number:', error)\n            })\n        }\n      }\n    })\n  }\n\n  const handleDelete = id => {\n    const person = persons.find(p => p.id === id)\n    if (window.confirm(`Delete ${person.name} ?`)) {\n      personService.deletePerson(id)\n        .then(() => {\n          const newPersons = persons.filter(p => p.id !== id)\n          setPersons(newPersons)\n          setFilteredPersons(newPersons.filter(p =>\n            p.name.toLowerCase().includes(newFilter.toLowerCase())))\n        })\n        .catch(() => {\n          setNotification([\"red\", `Information of ${person.name} has already been removed from server`])\n          setTimeout(() => {\n            setNotification([null, null])\n          }, 5000)\n          const newPersons = persons.filter(p => p.id !== id)\n          setPersons(newPersons)\n          setFilteredPersons(newPersons.filter(p =>\n            p.name.toLowerCase().includes(newFilter.toLowerCase())))\n        })\n    }\n  }\n\n\n  const [newName, setNewName] = useState('')\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const [newNumber, setNewNumber] = useState(\"\")\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const [filteredPersons, setFilteredPersons] = useState([...persons])\n\n  const [newFilter, setNewFilter] = useState(\"\")\n  const handleFilterChange = (event) => {\n    setNewFilter(event.target.value)\n    if (event.target.value === \"\"){\n      setFilteredPersons([...persons])\n    }else{\n      setFilteredPersons(persons.filter(p =>\n        p.name.toLowerCase().includes(event.target.value.toLowerCase())))\n    }\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification\n        notification={notification}/>\n      <Filter\n        newFilter={newFilter}\n        handleFilterChange={handleFilterChange}/>\n\n      <h3>Add a new</h3>\n      <PersonForm\n        addNewPerson={addNewPerson}\n        newName={newName}\n        handleNameChange={handleNameChange}\n        newNumber={newNumber}\n        handleNumberChange={handleNumberChange} />\n\n      <h3>Numbers</h3>\n      <Persons\n        persons={filteredPersons}\n        handleDelete={handleDelete}/>\n    </div>\n  )\n}\n\nconst Notification = ({notification}) => {\n  if (notification[1] === null)\n    return null\n  return (\n    <div className=\"notification\" style={{color: notification[0]}}>\n      {notification[1]}\n    </div>\n  )\n}\n\nexport default App","import ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)"],"sourceRoot":""}